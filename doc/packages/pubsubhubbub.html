<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>PubSubHubBub</title><meta name="generator" content="DocBook XSL Stylesheets V1.77.1"><link href="../default.css" type="text/css" rel="stylesheet"><script src="../default.js" type="text/javascript"></script><script type="text/javascript">
	  $(document).ready(function(){
	    prettyPrint();
	  });
	  </script></head><body><div class="container"><div lang="en" class="book"><div class="titlepage"><div><div><h1 class="title"><a name="d18019e1"></a>PubSubHubBub</h1></div><div><p class="releaseinfo">$Revision: 654 $</p></div><div><p class="pubdate">$Date: 2012-04-08 14:01:34 +0200 (So, 08. Apr 2012) $</p></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="chapter"><a href="#pubsubhubbub.introduction">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#pubsubhubbub.examples">2. Examples</a></span></dt><dt><span class="appendix"><a href="#pubsubhubbub.synopsis">1. Reference (3)</a></span></dt><dd><dl><dt><span class="sect1"><a href="#d18019e22">1.1. PSX_PubSubHubBub</a></span></dt><dt><span class="sect1"><a href="#d18019e150">1.2. PSX_PubSubHubBub_CallbackAbstract</a></span></dt><dt><span class="sect1"><a href="#d18019e234">1.3. PSX_PubSubHubBub_Exception</a></span></dt></dl></dd></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="pubsubhubbub.introduction"></a>Chapter&nbsp;1.&nbsp;Introduction</h1></div></div></div><p>@todo</p></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a name="pubsubhubbub.examples"></a>Chapter&nbsp;2.&nbsp;Examples</h1></div></div></div><p>@todo</p></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a name="pubsubhubbub.synopsis"></a>Appendix&nbsp;1.&nbsp;Reference (3)</h1></div></div></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#d18019e22">1.1. PSX_PubSubHubBub</a></span></dt><dt><span class="sect1"><a href="#d18019e150">1.2. PSX_PubSubHubBub_CallbackAbstract</a></span></dt><dt><span class="sect1"><a href="#d18019e234">1.3. PSX_PubSubHubBub_Exception</a></span></dt></dl></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d18019e22"></a>1.1.&nbsp;PSX_PubSubHubBub</h2></div></div></div><p>This package is to help implementing an pubsubhubbub subscriber or publisher.
If you add new content to your feed you have to inform the hub about that.
You can use the method "notification" to send an content notification i.e.
<code class="code prettyprint">
$http = new PSX_Http(new PSX_Http_Handler_Curl());
$pshb = new PSX_PubSubHubBub($http);
$url  = ''; # this is the absolute url to your feed

$pshb-&gt;notification(new PSX_Url('http://pubsubhubbub.appspot.com'), $url);
</code>

To implement a subscriber you have todo the following steps. First you have
to subscribe to a topic (a topic is an url to an ATOM feed) you can use the
request method to subscribe or unsubscribe to an topic i.e.
<code class="code prettyprint">
$http  = new PSX_Http(new PSX_Http_Handler_Curl());
$pshb  = new PSX_PubSubHubBub($http);
$topic = new PSX_Url(''); # this is an url to an ATOM feed that you want subscribe

try
{
	# first we discover the hub
	$hub = $pshb-&gt;discovery($topic);

	if(!empty($hub))
	{
		# url to the module wich extends the class psx_net_pubsubhubbub_callback
		$callback = new PSX_Url('http://google.de');
		$topic    = new PSX_Url('http://google.de');

		if($pshb-&gt;request($hub, $callback, 'subscribe', $topic, 'async'))
		{
			echo 'You have successful subscribe a topic'
		}
	}
	else
	{
		throw new PSX_Exception('Couldnt discover hub in feed url');
	}
}
catch(Exception $e)
{
	echo 'Error: ' . $e-&gt;getMessage();
}
</code>

More informations howto implement the callback at PubSubHubBub/CallbackAbstract.php</p><pre class="classsynopsis prettyprint"> <span class="ooclass"><span class="classname">PSX_PubSubHubBub</span></span>&nbsp;{<br><code class="fieldsynopsis">&nbsp;&nbsp;<span class="modifier">const&nbsp;</span><span class="type">integer&nbsp;</span><span class="varname">ATOM&nbsp;</span><span class="initializer">=&nbsp;1</span>;</code><br><code class="fieldsynopsis">&nbsp;&nbsp;<span class="modifier">const&nbsp;</span><span class="type">integer&nbsp;</span><span class="varname">RSS2&nbsp;</span><span class="initializer">=&nbsp;2</span>;</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">__construct</span>(<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">http</span></span>);</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">notification</span>(<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">endpoint</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">topic</span></span>);</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="type">boolean&nbsp;</span><span class="methodname">request</span>(<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">endpoint</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">callback</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">mode</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">topic</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">verify</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">leaseSeconds</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">secret</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">string&nbsp;</span><span class="parameter">verifyToken</span></span>);</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="type">PSX_Url|boolean&nbsp;</span><span class="methodname">discover</span>(<span class="methodparam"><span class="type">PSX_Url&nbsp;</span><span class="parameter">url</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">type</span></span>);</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">getLastDiscoveredHub</span>();</code><br>}</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d18019e150"></a>1.2.&nbsp;PSX_PubSubHubBub_CallbackAbstract</h2></div></div></div><p>PSX_PubSubHubBub_CallbackAbstract</p><pre class="classsynopsis prettyprint"> <span class="ooclass"><span class="classname">PSX_PubSubHubBub_CallbackAbstract</span></span> extends, <span class="ooclass"><span class="classname">PSX_Module_ApiAbstract</span></span>&nbsp;{<br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">__construct</span>(<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">base</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">basePath</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">uriFragments</span></span>);</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">getDependencies</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">_ini</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">onLoad</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">onGet</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">onPost</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">onPut</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">onDelete</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">processResponse</span>(<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">content</span></span>);</code><br>}</pre></div><div class="sect1"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d18019e234"></a>1.3.&nbsp;PSX_PubSubHubBub_Exception</h2></div></div></div><p>PSX_PubSubHubBub_Exception</p><pre class="classsynopsis prettyprint"> <span class="ooclass"><span class="classname">PSX_PubSubHubBub_Exception</span></span> extends, <span class="ooclass"><span class="classname">PSX_Exception</span></span>&nbsp;{<br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">__construct</span>(<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">message</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">code</span></span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="methodparam"><span class="type">mixed&nbsp;</span><span class="parameter">previous</span></span>);</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">final&nbsp;</span><span class="modifier">public&nbsp;</span><span class="methodname">getMessage</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">final&nbsp;</span><span class="modifier">public&nbsp;</span><span class="methodname">getCode</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">final&nbsp;</span><span class="modifier">public&nbsp;</span><span class="methodname">getFile</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">final&nbsp;</span><span class="modifier">public&nbsp;</span><span class="methodname">getLine</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">final&nbsp;</span><span class="modifier">public&nbsp;</span><span class="methodname">getTrace</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">final&nbsp;</span><span class="modifier">public&nbsp;</span><span class="methodname">getPrevious</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">final&nbsp;</span><span class="modifier">public&nbsp;</span><span class="methodname">getTraceAsString</span>();</code><br><code class="methodsynopsis">&nbsp;&nbsp;<span class="modifier">public&nbsp;</span><span class="methodname">__toString</span>();</code><br>}</pre></div></div></div></div></body></html>